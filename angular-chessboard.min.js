!function(){"use strict";angular.module("nywton.chessboard",[]).value("nywtonChessDefaultConfig",{position:void 0,showNotation:!0,orientation:"white",draggable:!1,dropOffBoard:"snapback",appearSpeed:200,moveSpeed:200,snapbackSpeed:50,snapSpeed:25,trashSpeed:100,onDragStart:angular.noop,onDrop:angular.noop,onSnapEnd:angular.noop,onChange:angular.noop,onDragMove:angular.noop,onSnapbackEnd:angular.noop,onMoveEnd:angular.noop,onMouseoutSquare:angular.noop,onMouseoverSquare:angular.noop}).provider("nywtonChessConfig",[function(){var a={};this.pieceTheme=function(b){return a.pieceTheme=b,this},this.position=function(b){return a.position=b,this},this.draggable=function(b){return a.draggable=b,this},this.$get=["nywtonChessDefaultConfig",function(b){return angular.extend(b,a)}]}]).config(["nywtonChessConfigProvider",function(a){a.draggable(!0).position("start")}]).directive("chessboard",["$window","$log","$timeout","nywtonChessConfig",function(a,b,c,d){var e=["draggable","dropOffBoard","position","orientation","showNotation","sparePieces","showErrors","pieceTheme","appearSpeed","moveSpeed","snapbackSpeed","snapSpeed","trashSpeed"],f=["onChange","onDragStart","onDragMove","onDrop","onSnapbackEnd","onMoveEnd","onMouseoutSquare","onMouseoverSquare","onSnapEnd"],g={restrict:"EA",scope:{name:"@",board:"=",onChange:"&",onDragMove:"&",onDrop:"&",onSnapbackEnd:"&",onMoveEnd:"&",onMouseoutSquare:"&",onMouseoverSquare:"&",onSnapEnd:"&",onDragStart:"&onDragStartCb"},priority:1e3,template:"<div></div>",controller:["$scope",function(a){var c=this,e=[];a.name=a.name||"board"+a.$id,this.config_push=function(a){angular.isArray(a)&&2===a.length&&angular.isString(a[0])&&!angular.isUndefined(a[1])&&e.push(a)},this.config=function(){var a={};angular.forEach(e,function(b){a[b[0]]=b[1]});var c=angular.extend(angular.copy(d),a);return b.debug(c),c},this.board=function(){return a.board};var g=function(){a.$parent.$digest()};angular.forEach(f,function(d){if(angular.isFunction(a[d])){var e=a[d]();angular.isFunction(e)?(b.debug("callback attr: "+d+" = "+e),c.config_push([d,e])):c.config_push([d,g])}})}],link:function(c,d,f,g){angular.forEach(e,function(a){b.debug("attr: "+a+" = "+c.$eval(f[a])),f.hasOwnProperty(a)&&g.config_push([a,c.$eval(f[a])])});var h=g.config(),i=angular.element("<div></div>")[0];d.prepend(i),c.board=new a.ChessBoard(i,h),c.board.name=c.name||"board"+c.$id}};return g}]).directive("positionRuyLopez",["$log",function(a){var b={restrict:"A",priority:1,require:"chessboard",link:function(b,c,d,e){a.debug('pushing config "position" with Ruy Lopez fen-string'),e.config_push(["position","r1bqkbnr/pppp1ppp/2n5/1B2p3/4P3/5N2/PPPP1PPP/RNBQK2R"])}};return b}]).directive("positionStart",["$log",function(a){var b={restrict:"A",priority:1,require:"chessboard",link:function(b,c,d,e){a.debug('pushing config "position" with start position'),e.config_push(["position","start"])}};return b}])}();